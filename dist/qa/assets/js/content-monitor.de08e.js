(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1004:function(e,t,n){},1007:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(1),o=n(76),c=(n(977),n(989),n(258),n(990),n(985),n(259),n(86)),i=n(84),s=n(993),l=n(995),u=n(18),m=n.n(u),p=n(261),d=n.n(p),f=(n(414),n(141)),h=n.n(f),g=(n(187),d.a.Group),v=d.a.Button,b=function(e){var t={widgets:[[{type:"Input",label:"房间号",width:80,placeholder:"请输入房间号",value:e.state.searchRoomId||void 0,onChange:function(t){e.setState({searchRoomId:t.target.value,filter:Object.assign({},e.state.filter,{roomId:t.target.value})})}},{type:"Input",label:"UID",width:80,placeholder:"请输入uid",value:e.state.searchUid||void 0,onChange:function(t){e.setState({searchUid:t.target.value,filter:Object.assign({},e.state.filter,{uid:t.target.value})})}},{type:"Select",label:"状态",showSearch:!1,placeholder:"请选择状态",allowClear:!1,width:100,value:e.state.searchStatus,option:{key:"id",value:"value",title:"text",data:[{id:0,text:"未处理",value:0},{id:1,text:"已处理",value:1}]},onSelect:function(t,n){e.setState({searchStatus:t,filter:Object.assign({},e.state.filter,{status:t})})}},{type:"Select",label:"鉴黄结果",showSearch:!1,placeholder:"请选择鉴黄结果",allowClear:!1,width:100,value:e.state.searchScene,option:{key:"id",value:"value",title:"text",data:[{id:0,text:"色情",value:"porn"},{id:1,text:"性感",value:"sexy"}]},onSelect:function(t,n){e.setState({searchScene:t,filter:Object.assign({},e.state.filter,{scene:t})})}}],[{type:"RangePicker",label:"时间",placeholder:["开始日期","结束日期"],showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",alias:[1,7,30],value:e.state.searchDateRange||[],onChange:function(t){e.setState({searchDateRange:t,filter:Object.assign({},e.state.filter,{startTime:t[0]?m()(t[0]).format("YYYY-MM-DD HH:mm:ss"):"",endTime:t[1]?m()(t[1]).format("YYYY-MM-DD HH:mm:ss"):""})})}}]],onSearch:function(){e.onSearch()},onReset:function(){e.onReset()}},n=Object.assign({},e.props.content.paginationConfig,{defaultPageSize:8,pageSizeOptions:["8","16","24","32","40"],current:e.state.currentPage,total:e.props.content.reviewListMeta.total,onShowSizeChange:function(t,n){var a={pageNum:t,pageSize:n};e.setState({filter:Object.assign({},e.state.filter,a),currentPage:t},function(){e.getDataList(e.state.filter)})},onChange:function(t,n){var a={pageNum:t,pageSize:n};e.setState({filter:Object.assign({},e.state.filter,a),currentPage:t},function(){e.getDataList(e.state.filter)})}});return{searcher:t,cards:{dataSource:e.props.content.showReviewList,key:"id",mode:"custom",pagination:n,loading:e.state.tableLoading,renderCard:function(e){var t={0:"未处理",1:"已处理"};return r.createElement("div",{className:"review-card"},r.createElement("img",{className:"review-card-img",id:e.requestId,alt:""}),r.createElement("canvas",null),r.createElement("div",{className:"review-card-text"},r.createElement("div",null,m()(e.reviewTime).format("YYYY-MM-DD HH:mm:ss")),r.createElement("div",null,r.createElement("span",{style:{color:"#999"}},"鉴黄结果："),r.createElement("span",{style:{color:"sexy"===e.scene?"#FAAA42":"#FB2032"}},"".concat(e.scene," ").concat((100*e.score).toFixed(2),"%"))),r.createElement("div",null,"状态：",Object.keys(t).includes(String(e.status))&&t[e.status])))}},tableHeader:function(){var t=e.state.userList;return r.createElement("div",{style:{marginTop:-10}},e.state.roomId&&r.createElement("h3",null,"房间号：",e.state.roomId),t.length>0&&r.createElement("div",{style:{marginTop:15}},r.createElement(g,{value:e.props.content.selectUser,buttonStyle:"solid",onChange:function(t){e.setState({filter:Object.assign({},e.state.filter,{uid:t.target.value})},function(){return a.a(void 0,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.props.content.setSelectUser(t.target.value),e.getDataList(e.state.filter),e.props.content.setPaginationCurrent(1);case 3:case"end":return n.stop()}},n)}))})}},t.map(function(e){return r.createElement(v,{key:e.uid,value:e.uid},1===e.isCoach?"教练":e.uid)}))),e.state.roomId&&e.state.userList.length>0&&r.createElement("div",{className:"head-btn-right"},r.createElement(h.a,{type:"primary",onClick:function(){return e.operate("ignore")}},"全部忽略"),r.createElement(h.a,{onClick:function(){return e.operate("out")}},"踢出")))}}},y=n(142),E=n(50);n(1004);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=C(t).apply(this,arguments),(e=!r||"object"!==w(r)&&"function"!=typeof r?k(n):r).state={filter:{},tableLoading:!1,currentPage:1,searchRoomId:"",searchUid:"",searchStatus:void 0,searchScene:void 0,searchDateRange:[],userList:[],roomId:""},e.resetPagination=function(t,n){return a.a(k(e),void 0,void 0,regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({filter:Object.assign({},this.state.filter,{pageSize:t,pageNum:n})},function(){return a.a(r,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))});case 1:case"end":return e.stop()}},e,this)}))},e.getDataList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({tableLoading:!0,filter:Object.assign({},e.state.filter,t)},function(){return a.a(k(e),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.content.getReviewList(Object.assign({},this.state.filter,t));case 2:this.setState({tableLoading:!1});case 3:case"end":return e.stop()}},e,this)}))})},e.onSearch=function(){return a.a(k(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,c=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={channelName:this.state.searchRoomId},e.next=3,this.$api.content.getUserList({params:t});case 3:n=e.sent,r=n.data,this.state.searchUid&&r.find(function(e){return e.uid===Number(c.state.searchUid)})?(this.setState({filter:Object.assign({},this.state.filter,{uid:Number(this.state.searchUid)})}),this.props.content.setSelectUser(Number(this.state.searchUid))):(o=r.find(function(e){return 1===e.isCoach}))&&(this.setState({filter:Object.assign({},this.state.filter,{uid:o.uid})}),this.props.content.setSelectUser(o.uid)),this.setState({filter:Object.assign({},this.state.filter,{pageNum:1}),roomId:this.state.searchRoomId,userList:r},function(){return a.a(c,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.getDataList(this.state.filter),this.props.content.setPaginationCurrent(1);case 2:case"end":return e.stop()}},e,this)}))});case 7:case"end":return e.stop()}},e,this)}))},e.onReset=function(){return a.a(k(e),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.filter,{pageNum:1}),t=E.a.delSomeKeys(t,["roomId","uid","status","scene","startTime","endTime"]),this.getDataList(t),this.props.content.setPaginationCurrent(1),this.setState({filter:t,searchRoomId:"",searchUid:"",searchStatus:void 0,searchScene:void 0,searchDateRange:[],userList:[],roomId:""});case 5:case"end":return e.stop()}},e,this)}))},e.operate=function(t){return a.a(k(e),void 0,void 0,regeneratorRuntime.mark(function e(){var n,a,r,o,c,i,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={ignore:2,out:1},Object.keys(n).includes(t)){e.next=3;break}return e.abrupt("return",this.$msg.warn("不存在此操作"));case 3:return a=this.state.roomId,r=this.props.content.selectUser,o={channelName:a,uid:r,operation:n[t],operateUser:"管理员（默认）"},c=E.a.spliceQuery(o),e.next=9,this.$api.content.reviewOperate(c).catch(function(e){s.$msg.error(e)});case 9:200!==(i=e.sent).status&&204!==i.status||this.$msg.success("操作成功！");case 11:case"end":return e.stop()}},e,this)}))},e}var n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,o["a"]),n=t,(i=[{key:"componentDidMount",value:function(){return a.a(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.content.paginationConfig,n=t.defaultPageSize,a=t.defaultCurrent,this.resetPagination(n,a);case 2:case"end":return e.stop()}},e,this)}))}},{key:"componentDidUpdate",value:function(){"/admin/content/monitor"===this.props.location.pathname&&this.props.history.replace("/admin/content/monitor/list")}},{key:"render",value:function(){var e=this,t=this.props.match;return r.createElement("div",null,r.createElement(s.a,Object.assign({},this.props,{title:"监控管理"})),r.createElement(c.a,{path:"".concat(t.url,"/list"),render:function(t){return r.createElement(l.a,Object.assign({},t,{config:b(e)}))}}),r.createElement("img",{id:"test",alt:""}),r.createElement("canvas",null))}}])&&S(n.prototype,i),u&&S(n,u),t}();O=a.b([Object(y.a)("/admin/content/monitor",{exact:!1}),Object(i.b)("common","content"),i.c],O);t.default=O},993:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(1),r=n(982),o=n.n(r),c=(n(981),n(50));n(994);function i(e){var t=c.a.getPageBreadcrumb(e.location.pathname),n=e.title,r=e.links,i=e.tabs,s=e.currentTab;return a.createElement("div",{className:"common-header"},a.createElement("section",{className:"common-header-breadcrumb"},t&&a.createElement(o.a,null,t.map(function(e,t){return a.createElement(o.a.Item,{key:t},e.title)}))),a.createElement("section",{className:"common-header-title",style:{marginBottom:i?25:0}},a.createElement("h2",null,n),a.createElement("div",{className:"common-header-links"},r&&r.map(function(t,n){return a.createElement("a",{key:n,onClick:function(){e.history.push(t.path)}},t.title)}))),a.createElement("section",{className:"common-header-tabs"},i&&i.map(function(t,n){return a.createElement("a",{key:t.id,onClick:function(){e.onTabClick(t.id)},className:"".concat(s===t.id?"tab-active":""," ")},a.createElement("span",null,t.title),t.tipComponent&&t.tipComponent())})))}},994:function(e,t,n){},995:function(e,t,n){"use strict";n.d(t,"a",function(){return U});var a=n(1),r=n(76),o=(n(996),n(141)),c=n.n(o),i=(n(187),n(260)),s=n.n(i),l=(n(408),n(407)),u=n.n(l),m=(n(259),n(984)),p=n.n(m),d=(n(983),n(979)),f=n.n(d),h=(n(978),n(188)),g=n.n(h),v=(n(409),n(16)),b=n.n(v),y=(n(258),n(412)),E=n.n(y),w=(n(411),n(413)),S=n.n(w),C=(n(410),n(50)),k=n(18),N=n.n(k);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function j(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=s.a.Option,D=u.a.Group,T=f.a.RangePicker,L={SelectInput:function(e){var t=e.selectValue,n=e.inputValue,r=e.placeholder,o=e.options,c=e.onSelectChange,i=e.onInputChange;return a.createElement(D,{compact:!0},a.createElement(s.a,{style:{width:100},value:t,onChange:c},o&&o.map(function(e,t){return a.createElement(I,{key:t,value:e.value},e.title)})),a.createElement(u.a,{style:{width:238},value:n,onChange:i,placeholder:r}))},Select:function(e){var t=e.option,n=e.label,r=e.mode,o=e.onSearch,c=e.onSelect,i=e.onBlur,l=e.onFocus,u=e.value,m=e.placeholder,p=e.showSearch,d=e.width,f=e.filterOption,h=e.onChange,g=e.allowClear,v=e.onPopupScroll;return a.createElement(a.Fragment,null,n&&a.createElement("span",{className:"common-list-label"},"".concat(n,"：")),a.createElement("span",{className:"common-list-control"},a.createElement(s.a,{allowClear:g,value:u,mode:r||!1,style:{minWidth:d||258,width:d},showSearch:p,placeholder:m,filterOption:f,onSearch:o,onSelect:c,onChange:h,onBlur:i,onPopupScroll:v,onFocus:l},t.data.map(function(e){return a.createElement(I,{key:e[t.key]||e.id,value:e[t.value]||e.id,$data:e},e[t.title])}))))},DatePicker:function(e){var t=e.label,n=e.placeholder,r=e.onChange,o=e.value,c=e.style,i=e.format,s=e.showTime;return a.createElement(a.Fragment,null,t&&a.createElement("span",{className:"common-list-label"},"".concat(t,"：")),a.createElement("span",{className:"common-list-control"},a.createElement(f.a,{format:i||!1,style:c,showTime:s,placeholder:n,value:o,onChange:r})))},RangePicker:function(e){var t=e.label,n=e.alias,r=e.placeholder,o=e.onChange,i=e.value,s=e.showTime,l=e.format;return a.createElement(a.Fragment,null,t&&a.createElement("span",{className:"common-list-label"},"".concat(t,"：")),a.createElement("span",{className:"common-list-control"},a.createElement(T,{style:{width:400},showTime:s,format:l,placeholder:r,value:i,onChange:o}),a.createElement("span",{className:"common-list-control-date-alias"},!C.a.isEmpty(n)&&n.map(function(e,t){return a.createElement(c.a,{key:t,onClick:function(){return o([N()(Date.now()-864e5*e),N()()])}},e," 天内")}))))},Input:function(e){var t=e.label,n=e.value,r=e.placeholder,o=e.onChange,c=e.width;return a.createElement(a.Fragment,null,t&&a.createElement("span",{className:"common-list-label"},"".concat(t,"：")),a.createElement("span",{className:"common-list-control"},a.createElement(u.a,{style:{minWidth:c||258},value:n,onChange:o,placeholder:r})))},Checkbox:function(e){var t=e.label,n=e.value,r=e.onChange;return a.createElement(g.a,{checked:n,onChange:r},t)},Label:function(e,t){var n=e.label;return a.createElement(a.Fragment,null,n&&a.createElement("span",{className:"common-list-label"},"".concat(n,"：")),a.createElement("span",{className:"common-list-control"},t))},Custom:function(e){return a.createElement("div",null,(void 0).props.children)}},U=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=j(this,x(t).apply(this,arguments))).state={collapse:!0},e.toggleCollapse=function(t){e.setState({collapse:!e.state.collapse})},e.renderSearcher=function(){var t=e.props.config,n=t.searcher,r=t.table,o=e.state.collapse;return n&&a.createElement("section",{className:"common-list-search"},e.renderWidgets(n.widgets),r&&r.tableHeader&&r.tableHeader(),a.createElement("div",{className:"common-list-search-right"},n.collapseControl&&n.collapseControl.showMoreBtn&&a.createElement("span",{className:"common-list-serach-more"},a.createElement("a",{style:{display:"flex",alignItems:"center"},onClick:e.toggleCollapse},o?"更多":"收起"," ",a.createElement(b.a,{type:o?"down":"up"}))),!n.hideSearcher&&a.createElement(a.Fragment,null,a.createElement(c.a,{type:"primary",onClick:n.onSearch},"查询"),a.createElement(c.a,{onClick:n.onReset},"重置"))))},e.renderWidgets=function(t){var n=e.state.collapse,r=e.props.config.searcher;return t&&a.createElement("div",{className:"common-list-search-left"},t.map(function(t,o){return Array.isArray(t)?a.createElement("div",{key:o,className:"common-list-search-row",style:{display:r.collapseControl&&r.collapseControl.showMoreBtn&&n&&o>0?"none":"flex"}},t.map(function(t){return a.createElement("div",{key:t.label,className:"common-list-search-col",style:Object.assign({},t.style)},L[t.type]&&L[t.type](t,t.children?e.renderWidgets(t.children):null))})):a.createElement("div",{key:t.label,className:"common-list-search-row ".concat(t.className)},L[t.type]&&L[t.type](t,t.children?e.renderWidgets(t.children):null))}))},e.renderAddBtn=function(){var t=e.props.config,n=t.addBtn,r=t.searcher;return n&&a.createElement("section",{className:"common-list-addbtn",style:n.style},"function"==typeof n.title?a.createElement(n.title,null):n.title,a.createElement("div",{className:"common-list-search-batch"},r&&r.batchControl.showBatchControl&&a.createElement(s.a,{placeholder:r.batchControl.placeholder,style:{minWidth:120},defaultValue:void 0,onChange:r.batchControl.onBatch},r.batchControl.options.map(function(e){return a.createElement(I,{key:e.value,value:e.value},e.title)}))))},e.renderTableHeader=function(){var t=e.props.config.tableHeader;return a.createElement("section",{className:"common-list-table-header"},t&&t())},e.renderTable=function(){var t=e.props.config.table,n=t.rowKey,r=t.rowSelection,o=t.columns,c=t.dataSource,i=t.pagination,s=t.onChange,l=t.loading,u=t.locale;return a.createElement("section",{className:"common-list-table"},a.createElement(p.a,{locale:u,rowKey:n||"id",rowSelection:r,columns:o,dataSource:c,loading:l,pagination:i,onChange:s}))},e.renderCards=function(){var t=e.props.config.cards,n=t.dataSource,r=t.loading,o=t.pagination,c=t.renderCard,i=t.addBtn,s=t.mode;return a.createElement("div",{className:"common-list-cards-wrapper"},a.createElement("ul",{className:"common-list-cards"},r?a.createElement("div",{className:"common-list-cards-loading"},a.createElement(S.a,null)):a.createElement(a.Fragment,null,i&&a.createElement("li",{className:"common-list-card add-btn"},a.createElement("div",{className:"common-list-card-item",onClick:i.onAddBtnClick},i.icon?a.createElement("img",{src:i.icon,alt:""}):a.createElement(b.a,{type:"plus-circle"}),a.createElement("p",null,i.title))),"custom"===s?n.map(function(e){return a.createElement("li",{key:e[e.key]||e.id},c(e))}):n.map(function(e){return a.createElement("li",{className:"common-list-card",key:e[e.key]||e.id},a.createElement("div",{className:"common-list-card-item"},c(e)))}))),a.createElement("section",{className:"common-list-cards-pagination"},a.createElement(E.a,Object.assign({},o))))},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r["a"]),n=t,(o=[{key:"render",value:function(){var e=this.props.config;return a.createElement("div",{className:"common-list"},this.renderSearcher(),this.renderAddBtn(),this.renderTableHeader(),e.table&&this.renderTable(),e.cards&&this.renderCards())}}])&&R(n.prototype,o),i&&R(n,i),t}()},996:function(e,t,n){}}]);